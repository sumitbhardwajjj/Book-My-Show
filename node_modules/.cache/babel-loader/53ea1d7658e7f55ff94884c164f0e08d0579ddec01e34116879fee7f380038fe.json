{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/91983/Documents/BookMySchool/book-my-show/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/91983/Documents/BookMySchool/book-my-show/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/91983/Documents/BookMySchool/book-my-show/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import\"../styles/bookingDetails.css\";import{seats}from\"../data\";import Loader from\"../Components/loader\";import BsContext from\"../Context/BsContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LastBookingData=function LastBookingData(props){// Getting movie and change movie components from the context.\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),lastBooking=_useState2[0],setLastBooking=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loader=_useState4[0],setLoader=_useState4[1];var context=useContext(BsContext);var lastBookingDatas=context.lastBookingDatas;var getLastRecord=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoader(true);_context.next=4;return fetch(\"https://bookmyshow-backend-main.onrender.com/api/booking\",{method:\"GET\"});case 4:res=_context.sent;_context.next=7;return res.json();case 7:data=_context.sent;setLastBooking(data.data);setLoader(false);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function getLastRecord(){return _ref.apply(this,arguments);};}();useEffect(function(){getLastRecord();//calling get last booking api \n},[lastBookingDatas]);return/*#__PURE__*/_jsxs(\"div\",{className:\"last_booking_details_container_main\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"last_booking_details_header\",children:\"Last Booking Details:\"}),loader?/*#__PURE__*/_jsx(Loader,{}):lastBooking?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"seats_container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"seats_header\",children:\"Seats:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"seats\",children:seats.map(function(seat,index){return/*#__PURE__*/_jsxs(\"li\",{className:\"seat_value\",children:[seat,\": \",Number(lastBooking?lastBooking===null||lastBooking===void 0?void 0:lastBooking.seats[seat]:\"\")]},index);})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"slot\",style:{textAlign:\"left\"},children:[\"Slot: \",/*#__PURE__*/_jsx(\"span\",{children:lastBooking===null||lastBooking===void 0?void 0:lastBooking.slot})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"movie\",children:[\"Movie: \",/*#__PURE__*/_jsx(\"span\",{children:lastBooking===null||lastBooking===void 0?void 0:lastBooking.movie})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"no_previous_booking_msg\",children:\"No Previous Booking Found!\"})]});};export default LastBookingData;","map":{"version":3,"names":["React","useContext","useEffect","useState","seats","Loader","BsContext","LastBookingData","props","lastBooking","setLastBooking","loader","setLoader","context","lastBookingDatas","getLastRecord","fetch","method","res","json","data","console","error","map","seat","index","Number","textAlign","slot","movie"],"sources":["C:/Users/91983/Documents/BookMySchool/book-my-show/src/Components/LastBookingData.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport \"../styles/bookingDetails.css\";\r\nimport { seats } from \"../data\";\r\nimport Loader from \"../Components/loader\"\r\nimport BsContext from \"../Context/BsContext\";\r\nconst LastBookingData = (props) => {\r\n  // Getting movie and change movie components from the context.\r\n  const [lastBooking, setLastBooking] = useState(\"\")\r\n  const [loader, setLoader] = useState(false)\r\n  const context = useContext(BsContext);\r\n  const {lastBookingDatas } = context; \r\n  const getLastRecord = async () => {\r\n    try {\r\n      setLoader(true)\r\n      const res = await fetch(\r\n         \"https://bookmyshow-backend-main.onrender.com/api/booking\",\r\n        {\r\n          method: \"GET\",\r\n        }\r\n      );\r\n      const data = await res.json();\r\n      setLastBooking(data.data)\r\n      setLoader(false)\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getLastRecord() //calling get last booking api \r\n  }, [lastBookingDatas]);\r\n\r\n  return (\r\n\r\n    <div className=\"last_booking_details_container_main\">\r\n      <h2 className=\"last_booking_details_header\">Last Booking Details:</h2>\r\n      { loader \r\n          ? <Loader/>\r\n          : lastBooking \r\n              ? <div>\r\n                  <div className=\"seats_container\">\r\n                    <p className=\"seats_header\">Seats:</p>\r\n                    <ul className=\"seats\">\r\n                      {seats.map((seat, index) => {\r\n                        return (\r\n                          <li className=\"seat_value\" key={index}>\r\n                            {seat}: {Number(lastBooking ? lastBooking?.seats[seat] : \"\")}\r\n                          </li>\r\n                        );\r\n                      })}\r\n                    </ul>\r\n                  </div>\r\n                  <p className=\"slot\" style={{ textAlign: \"left\" }}>\r\n                    Slot: <span>{lastBooking?.slot}</span>\r\n                  </p>\r\n                  <p className=\"movie\">\r\n                    Movie: <span>{lastBooking?.movie}</span>\r\n                  </p>\r\n                </div>\r\n              : <p className=\"no_previous_booking_msg\">No Previous Booking Found!</p>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LastBookingData;\r\n"],"mappings":"waAAA,MAAOA,MAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,MAAO,8BAA8B,CACrC,OAASC,KAAK,KAAQ,SAAS,CAC/B,MAAOC,OAAM,KAAM,sBAAsB,CACzC,MAAOC,UAAS,KAAM,sBAAsB,CAAC,wFAC7C,GAAMC,gBAAe,CAAG,QAAlBA,gBAAe,CAAIC,KAAK,CAAK,CACjC;AACA,cAAsCL,QAAQ,CAAC,EAAE,CAAC,wCAA3CM,WAAW,eAAEC,cAAc,eAClC,eAA4BP,QAAQ,CAAC,KAAK,CAAC,yCAApCQ,MAAM,eAAEC,SAAS,eACxB,GAAMC,QAAO,CAAGZ,UAAU,CAACK,SAAS,CAAC,CACrC,GAAOQ,iBAAgB,CAAKD,OAAO,CAA5BC,gBAAgB,CACvB,GAAMC,cAAa,4FAAG,kKAElBH,SAAS,CAAC,IAAI,CAAC,uBACGI,MAAK,CACpB,0DAA0D,CAC3D,CACEC,MAAM,CAAE,KACV,CAAC,CACF,QALKC,GAAG,qCAMUA,IAAG,CAACC,IAAI,EAAE,QAAvBC,IAAI,eACVV,cAAc,CAACU,IAAI,CAACA,IAAI,CAAC,CACzBR,SAAS,CAAC,KAAK,CAAC,kFAEhBS,OAAO,CAACC,KAAK,aAAO,CAAC,qEAExB,kBAfKP,cAAa,0CAelB,CAEDb,SAAS,CAAC,UAAM,CACda,aAAa,EAAE,CAAC;AAClB,CAAC,CAAE,CAACD,gBAAgB,CAAC,CAAC,CAEtB,mBAEE,aAAK,SAAS,CAAC,qCAAqC,wBAClD,WAAI,SAAS,CAAC,6BAA6B,mCAA2B,CACpEH,MAAM,cACF,KAAC,MAAM,IAAE,CACTF,WAAW,cACP,oCACE,aAAK,SAAS,CAAC,iBAAiB,wBAC9B,UAAG,SAAS,CAAC,cAAc,oBAAW,cACtC,WAAI,SAAS,CAAC,OAAO,UAClBL,KAAK,CAACmB,GAAG,CAAC,SAACC,IAAI,CAAEC,KAAK,CAAK,CAC1B,mBACE,YAAI,SAAS,CAAC,YAAY,WACvBD,IAAI,MAAIE,MAAM,CAACjB,WAAW,CAAGA,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEL,KAAK,CAACoB,IAAI,CAAC,CAAG,EAAE,CAAC,GAD9BC,KAAK,CAEhC,CAET,CAAC,CAAC,EACC,GACD,cACN,WAAG,SAAS,CAAC,MAAM,CAAC,KAAK,CAAE,CAAEE,SAAS,CAAE,MAAO,CAAE,iCACzC,sBAAOlB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEmB,IAAI,EAAQ,GACpC,cACJ,WAAG,SAAS,CAAC,OAAO,kCACX,sBAAOnB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEoB,KAAK,EAAQ,GACtC,GACA,cACN,UAAG,SAAS,CAAC,yBAAyB,wCAA+B,GAE3E,CAEV,CAAC,CAED,cAAetB,gBAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}